{
    "componentChunkName": "component---src-pages-blog-mdx-slug-js",
    "path": "/blog/temporary-table/",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Temporary table","date":"October 8, 2021"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Temporary table\",\n  \"date\": \"2021-10-08\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"A \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"temporary table\"), \" stores data within the database session, in which it was created. When the session is ended, the dataset is automatically deleted. We are using a temporary table when we need to use some specific data for several SQL queries within one session. They can collect the results of multiple, separate queries or store a filtered subset of the database. You don\\u2019t need to select and filter the data each time you work with it. Using temporary tables simplifies our SQL queries and makes them easier to understand for others.\\nThere are different ways to create temporary tables, like clauses WITH \\u2026 AS, SELECT\\u2026 INTO, CREATE TEMP TABLE.\\nThe syntax is as follow:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"WITH new_table_name AS(\\nSELECT col_name1\\nFROM table_name)\\n\\nSELECT *\\nINTO new_table_name\\nFROM table_name\\nWHERE col_name = \\u201CGermany\\u201D\\n\\nCREATE TEMP TABLE new_table_name AS\\n(\\nSELECT *\\nFROM table_name\\nWHERE col_name = \\u201CGermany\\u201D\\n)\\n\")), mdx(\"p\", null, \"Within a session temporary table works like a normal table, you can perform the operations SELECT, INSERT, DELETE with it. After the session ended, the tables, that were made with SELECT... INTO and WITH...AS statements are automatically deleted.\\nThe temporary table that was created with CREATE TABLE statement is added to the database and it is the user\\u2019s responsibility to delete or drop it. In that case, using \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DROP\"), \" table_name will delete not only the rows of the table but also columns and table definition. Using \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \" table_name statement will delete only rows, but leaves the columns of the table to be used again.\"), mdx(\"p\", null, \"I prefer using WITH \\u2026 AS statement.\\nFor example, returning to our open public dataset. Let\\u2019s now use the  \\u2018san_francisko_bikeshare\\u2019 dataset. With a temporary table \\u2018popular_bike\\u2019 I will find the most popular bike and what is its starting station.  Then in my next query, I will join another table to my temporary table and will find how many bikes are available on this starting_station. It is for the reason, to find if this bike is popular only because there is a lack of them on this station or it is just a popular starting point.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"WITH popular_bike AS (\\n   SELECT bike_number,\\n       start_station_id,\\n       (SUM (duration_sec)/3600) AS duration_of_use   --to find the time in hours we will delete duration on 3600\\n   FROM `bigquery-public-data.san_francisco_bikeshare.bikeshare_trips`\\n   GROUP BY bike_number, start_station_id\\n   ORDER BY duration_of_use DESC\\n   LIMIT 1)\\n\\nSELECT a.bike_number,\\n   a.duration_of_use,\\n   b.station_id,\\n   b.num_bikes_available\\nFROM popular_bike a LEFT JOIN  `bigquery-public-data.san_francisco_bikeshare.bikeshare_station_status` b\\nON a.start_station_id = b.station_id\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/12031583bcf2424eff8c8df338bc921b/7ef4c/sf_bikeshare_avg.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"41.891891891891895%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQoz5WSW2ocMRBFe/lZiDfkn/wYbDweumd6+jHqh0qlknSM2kkgwcH4wqEkELdU3Gp+Pjt+PJx4fHJs3tCY2MQYnaLRcKsyuUCM8S80RoZl4n6/M8/zwbIsNCIe1cjqE7fbyK3vuV4u3N1KfxvZt42qUgoUflE+7p+o8d6zizHtykvbcereOLVvdOPAa9dxnXokKVv0eAvsMSCmf5r8SyMiiASCBjIZywVNBbVMKplgGVFDNGIpYTmRcv7U7DCsc/d9zzAMlJyRkJiWiFsjool5NeYlsksiV6Ocj/o/mpQSqkr9qRdBNaDhg/rgu2pqSufzGeccl1Fou/4IpusuR4K1mZkRox31K5pq1LbtMXY9/6auwbEeqt/iHWHzbmWXXjuGAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Bikeshare_temporary table\",\n    \"title\": \"Bikeshare_temporary table\",\n    \"src\": \"/static/12031583bcf2424eff8c8df338bc921b/fcda8/sf_bikeshare_avg.png\",\n    \"srcSet\": [\"/static/12031583bcf2424eff8c8df338bc921b/12f09/sf_bikeshare_avg.png 148w\", \"/static/12031583bcf2424eff8c8df338bc921b/e4a3f/sf_bikeshare_avg.png 295w\", \"/static/12031583bcf2424eff8c8df338bc921b/fcda8/sf_bikeshare_avg.png 590w\", \"/static/12031583bcf2424eff8c8df338bc921b/efc66/sf_bikeshare_avg.png 885w\", \"/static/12031583bcf2424eff8c8df338bc921b/c83ae/sf_bikeshare_avg.png 1180w\", \"/static/12031583bcf2424eff8c8df338bc921b/7ef4c/sf_bikeshare_avg.png 1748w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"This result tells us that the most popular bike Num.535 has been rented for 4805 hours. It lives on the station with Id.66 and the number of bikes available there is 25. Is it a lot? Or is it not enough? To answer this question we need to know the number of bikes on other stations. So I have found an average, minimum and maximum number of bikes for all the stations.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/12031583bcf2424eff8c8df338bc921b/7ef4c/sf_bikeshare_avg.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"41.891891891891895%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQoz5WSW2ocMRBFe/lZiDfkn/wYbDweumd6+jHqh0qlknSM2kkgwcH4wqEkELdU3Gp+Pjt+PJx4fHJs3tCY2MQYnaLRcKsyuUCM8S80RoZl4n6/M8/zwbIsNCIe1cjqE7fbyK3vuV4u3N1KfxvZt42qUgoUflE+7p+o8d6zizHtykvbcereOLVvdOPAa9dxnXokKVv0eAvsMSCmf5r8SyMiiASCBjIZywVNBbVMKplgGVFDNGIpYTmRcv7U7DCsc/d9zzAMlJyRkJiWiFsjool5NeYlsksiV6Ocj/o/mpQSqkr9qRdBNaDhg/rgu2pqSufzGeccl1Fou/4IpusuR4K1mZkRox31K5pq1LbtMXY9/6auwbEeqt/iHWHzbmWXXjuGAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Bikeshare_trips avg\",\n    \"title\": \"Bikeshare_trips avg\",\n    \"src\": \"/static/12031583bcf2424eff8c8df338bc921b/fcda8/sf_bikeshare_avg.png\",\n    \"srcSet\": [\"/static/12031583bcf2424eff8c8df338bc921b/12f09/sf_bikeshare_avg.png 148w\", \"/static/12031583bcf2424eff8c8df338bc921b/e4a3f/sf_bikeshare_avg.png 295w\", \"/static/12031583bcf2424eff8c8df338bc921b/fcda8/sf_bikeshare_avg.png 590w\", \"/static/12031583bcf2424eff8c8df338bc921b/efc66/sf_bikeshare_avg.png 885w\", \"/static/12031583bcf2424eff8c8df338bc921b/c83ae/sf_bikeshare_avg.png 1180w\", \"/static/12031583bcf2424eff8c8df338bc921b/7ef4c/sf_bikeshare_avg.png 1748w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"With this data, we can definitely say that 25 bikes it\\u2019s well over average and most probably this station is the popular starting point.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"79eb8409-6ee7-51bf-8dbd-6584da73069a","slug":"temporary-table","__params":{"slug":"temporary-table"}}},
    "staticQueryHashes": []}